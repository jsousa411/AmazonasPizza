var views=views||{},ajaxErrorHandled;views.createNS=function(n){var t=n.split("."),i=views,r,u;for(t[0]==="views"&&(t=t.slice(1)),r=0;r<t.length;r++)u=t[r],typeof i[u]=="undefined"&&(i[u]={}),i=i[u];return i};views.createNS("views.app");ajaxErrorHandled=!1;views.app=function(){var n=$("#main-content"),c=function(){b();i()},i=function(){$(document).ready(function(){r();tt();e();v();p();k();l();y()})};$(document).ready(function(){a()});var l=function(){$(".datepicker").datepicker({format:"dd/mm/yyyy",language:"en-US",autoclose:!0,todayBtn:!0})},a=function(){var n=!1,t=$("#loading-ajax-form");t.hide();t.on("show",function(){u(!0);var t=$("#main-content").find("form");n=!0;t.submit(function(){return!n})});t.on("hide",function(){u(!1);var t=$("#main-content").find("form");n=!n})},v=function(){$("form").removeData("validator").removeData("unobtrusiveValidation");$.validator.unobtrusive.parse("form")},y=function(){$(".i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"})},p=function(){var n=$(".select2");n.css("width","100%");n.each(function(){var n=$(this).attr("placeholder");(n==undefined||n==null)&&(n="Select");$(this).select2({theme:"bootstrap4",language:"en-US",placeholder:n,allowClear:$(this).find("option[value='']").length>0})});$(document).on("focus",".select2-selection.select2-selection--single",function(){var n=$(this).closest(".select2-container").siblings("select:enabled");n.attr("readonly")!=="readonly"&&n.attr("disabled")!=="disabled"&&n.select2("open")});$("select.select2").on("select2:closing",function(n){$(n.target).data("select2").$selection.one("focus focusin",function(n){n.stopPropagation()})}).on("select2:opening",function(n){($(this).attr("readonly")=="readonly"||$(this).attr("disabled")=="disabled")&&n.preventDefault()})},w=function(n,t){$(n).on("select2:open",function(){var n=$(this).data("select2");if(!$(".select2-link").length)n.$results.parents(".select2-results").append('<div class="select2-link"><a>+ Add<\/a><\/div>').on("click",function(){n.trigger("close");t&&t()})}).on("select2:opening",function(n){($(this).attr("readonly")=="readonly"||$(this).attr("disabled")=="disabled")&&n.preventDefault()})},b=function(){},k=function(){$(".uppercase").on("input",function(){let n=this.selectionStart;this.value=this.value.toUpperCase();this.setSelectionRange(n,n)})},d=function(n){var t=$("<a>",{text:"Loading...",href:n,"class":"ajax-link"}).appendTo("#main-content");r();t.click();t.remove()},g=function(n,i){h("Confirm delete?",function(){$.ajax({method:"POST",url:n}).done(function(){t("Success","Record deleted successfully!","success");i!=undefined&&i()}).fail(function(){f("Error deleting.")})})},nt=function(n,t,i){n.empty();n.append('<option value=""><\/option>');$.ajax({url:t}).done(function(t){for(var r=0;r<t.length;r++)i!==undefined&&i!==null&&t[r].ibge===i?n.append('<option value="'+t[r].id+'" selected>'+t[r].text+"<\/option>"):n.append('<option value="'+t[r].id+'">'+t[r].text+"<\/option>")})},e=function(){},tt=function(){var n=null;$(".field-validation-error").each(function(){var t=$(this).closest(".tab-pane").prop("id");t!==undefined&&t!==null&&t!==""&&(n===null&&(n=t),$('a[href$="#'+t+'"]').css("background-color","#ffeeee").css("color","#ff0000"))});n!==null&&$('.nav-tabs a[href="#'+n+'"]').tab("show")},r=function(){$(".ajax-link").off("click");$(".ajax-link").on("click",function(n){n.preventDefault();var t=$(this).attr("href");History.pushState(null,"xFÃ¡cil",t)})},o=null,it=function(){var t=window.History,n=t.getState();t.Adapter.bind(window,"statechange",function(){(n=t.getState(),n.url!=="")&&n.url!=o&&(o=n.url,s(n.url))})},s=function(t){n.showLoading();$.ajax({type:"GET",url:t,dataType:"html",success:function(t){n.hideLoading();n.hide();n.html(t);n.fadeIn(350);r()},error:function(t){n.hideLoading();t.status==404?n.html(t.responseText):t.status!==401&&t.status!==403&&views.app.confirmOk("Error loading page.\n"+t.responseText)}})},rt=function(){s(window.location.pathname+window.location.search);$(".modal-backdrop").remove()},u=function(t){t===!1?n.hideLoading():n.showLoading()},ut=function(n,t){t?$(n).showLoading():$(n).hideLoading()},f=function(n,t){var r=document.createElement("div");r.innerHTML=n;swal({title:"Oops...",content:r,icon:"error"}).then(n=>{n&&t&&t()});i()},h=function(n,t,r){var u=document.createElement("div");u.innerHTML=n;swal({title:"Warning!",content:u,icon:"warning",buttons:{sim:{text:"Yes",value:!0,className:"btn-primary"},nao:{text:"No",value:!1,className:"btn-danger"}}}).then(n=>{n?t&&t():r&&r()});i()},ft=function(n,t,r){var u=document.createElement("div");u.innerHTML=n;swal({title:"Attention!",content:u,icon:r}).then(n=>{n&&t&&t()});i()},et=function(n){n.find(":input").not(":button, :submit, :reset, :hidden").val("").prop("checked",!1).prop("selected",!1).trigger("change")},ot=function(n){n.find(":input").not(":button, :submit, :reset").attr("disabled","disabled")},t=function(n,t,i){var r=t,u=n;toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:300,hideDuration:100,timeOut:5e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut",onclick:null};toastr[i](r,u)},st=function(n){t("Success",n,"success")},ht=function(n){t("Error",n,"error")},ct=function(n){t("Warning",n,"warning")},lt=function(n){t("Information",n,"info")},at=function(n,t){$(n).find(t).keyup(function(){$(n).find(".ibox-title > h5").text($(this).val())})},vt=function(n){return new Date(n).toISOString().slice(11,-1)},yt=function(n,t,i,r){$.ajax({url:t,type:"POST",contentType:!1,cache:!1,processData:!1,data:n,xhr:function(){var n=null;return n=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new window.XMLHttpRequest,n.upload.addEventListener("progress",function(n){if(n.lengthComputable){var t=Math.round(n.loaded*100/n.total);i!=undefined&&i(t)}},!1),n.addEventListener("progress",function(n){n.lengthComputable},!1),n},success:function(n){r!=undefined&&r(n)},error:function(n){f(n.responseText)}})},pt=function(n){return n!=undefined&&n!=null&&n!=""?moment(n).format("MM/DD/YYYY"):""},wt=function(n){return n!=undefined&&n!=null&&n!=""?moment(n).format("MM/DD/YYYY HH:MM:SS"):""},bt=function(n){return n?"$ "+parseFloat(n.toString()).formatMoney(2,",","."):""},kt=function(n){return n!=undefined&&n!=null&&n!=""?moment(n).format("MM/YYYY"):""},dt=function(n,t){if(n==0)return"0 Bytes";var i=1e3,u=t+1||3,r=Math.floor(Math.log(n)/Math.log(i));return parseFloat((n/Math.pow(i,r)).toFixed(u))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]},gt=function(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},ni=function(n){function l(){u()}var i=n.elementId,f=n.onLoad,r=n.getFilters,e=document.getElementById(i),t=$("#"+i).find(".mvc-grid")[0],a=new MvcGrid(t),o=function(n){var t=$(n.detail.grid.element),i=t.find("tbody").find("tr").not(".mvc-grid-empty-row");f&&f(i)},s,h,u,c;e.removeEventListener("reloadend",o);e.addEventListener("reloadend",o);h=1e3;$("#"+i).on("keyup",".grid-search",function(){clearTimeout(s);s=setTimeout(l,h)});u=function(){var n=new MvcGrid(t),u;n.url.searchParams=[];n.url.searchParams.set("search",$("#"+i).find(".grid-search").val());r!=undefined&&r!=null&&(u=r(),u!=undefined&&u!=null&&$.each(u,function(t,i){n.url.searchParams.set(i.field,i.value)}));n.reload()};$(".content-refresh").on("click",function(){var n=new MvcGrid(t);n.reload()});return c=function(){var n=new MvcGrid(t);n.reload();n=new MvcGrid(t);n.reload()},{search:u,reload:c}};return it(),{initApp:c,initPage:i,loadMasks:e,ajaxLink:r,navTo:d,select2AddNewItem:w,deleteRecord:g,fetchSelectAjax:nt,loading:u,loadingElement:ut,reloadContentShell:rt,confirmYesNo:h,confirmOk:ft,confirmError:f,resetFields:et,disableInputs:ot,showToast:t,showToastSuccess:st,showToastDanger:ht,showToastWarning:ct,showToastInfo:lt,syncPanelTitle:at,formatDuration:vt,uploadAjaxProgress:yt,formatDate:pt,formatDateTime:wt,formataCurrency:bt,formatDateMonthYear:kt,formatBytes:dt,guid:gt,initMvcGrid:ni}}();moment.locale("en-US");$(document).ajaxError(function(n,t,i){if(ajaxErrorHandled)ajaxErrorHandled=!1;else if(t.status===401)window.location=i.url;else if(t.status===403)views.app.confirmErro("Forbidden.");else if(t.status===409)views.app.confirmErro(t.responseText);else if(t.status===404){views.app.loading(!0);var r=window.location.pathname;$.ajax({method:"POST",url:"/Home/PageNotFound",data:{url:r}}).done(function(n){$("#main-content").html(n);views.app.initPage()}).always(function(){views.app.loading(!1)})}else t.status===500?views.app.confirmErro("Internal server error. "+t.responseText):views.app.confirmErro(t.status+" - "+t.statusText)}),function(n){n.each(["show","hide"],function(t,i){var r=n.fn[i];n.fn[i]=function(){return this.trigger(i),r.apply(this,arguments)}})}(jQuery);Array.prototype.removeItem=function(n){const t=this.indexOf(n);return t>-1&&this.splice(t,1),t};String.prototype.getNumbers=function(){return this.replace(/\D/g,"")};Number.prototype.padLeft=function(n,t){return Array(n-String(this).length+1).join(t||"0")+this};String.prototype.padLeft=function(n,t){return Array(n-String(this).length+1).join(t||"0")+this};Number.prototype.formatMoney=function(n,t,i){var u=this,n=isNaN(n=Math.abs(n))?2:n,t=t==undefined?".":t,i=i==undefined?",":i,e=u<0?"-":"",f=parseInt(u=Math.abs(+u||0).toFixed(n))+"",r=(r=f.length)>3?r%3:0;return e+(r?f.substr(0,r)+i:"")+f.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+i)+(n?t+Math.abs(u-f).toFixed(n).slice(2):"")};$.fn.select2.defaults.set("language","pt-BR");views.createNS("views.home.index");views.home.index=function(){var n=function(){$(document).ready(function(){views.app.initPage();t()})},t=function(){function n(n,t,i){return new Date(n,t-1,i).getTime()}var t=[[n(2012,1,1),7],[n(2012,1,2),6],[n(2012,1,3),4],[n(2012,1,4),8],[n(2012,1,5),9],[n(2012,1,6),7],[n(2012,1,7),5],[n(2012,1,8),4],[n(2012,1,9),7],[n(2012,1,10),8],[n(2012,1,11),9],[n(2012,1,12),6],[n(2012,1,13),4],[n(2012,1,14),5],[n(2012,1,15),11],[n(2012,1,16),8],[n(2012,1,17),8],[n(2012,1,18),11],[n(2012,1,19),11],[n(2012,1,20),6],[n(2012,1,21),6],[n(2012,1,22),8],[n(2012,1,23),11],[n(2012,1,24),13],[n(2012,1,25),7],[n(2012,1,26),9],[n(2012,1,27),9],[n(2012,1,28),8],[n(2012,1,29),5],[n(2012,1,30),8],[n(2012,1,31),25]],i=[[n(2012,1,1),800],[n(2012,1,2),500],[n(2012,1,3),600],[n(2012,1,4),700],[n(2012,1,5),500],[n(2012,1,6),456],[n(2012,1,7),800],[n(2012,1,8),589],[n(2012,1,9),467],[n(2012,1,10),876],[n(2012,1,11),689],[n(2012,1,12),700],[n(2012,1,13),500],[n(2012,1,14),600],[n(2012,1,15),700],[n(2012,1,16),786],[n(2012,1,17),345],[n(2012,1,18),888],[n(2012,1,19),888],[n(2012,1,20),888],[n(2012,1,21),987],[n(2012,1,22),444],[n(2012,1,23),999],[n(2012,1,24),567],[n(2012,1,25),786],[n(2012,1,26),666],[n(2012,1,27),888],[n(2012,1,28),900],[n(2012,1,29),178],[n(2012,1,30),555],[n(2012,1,31),993]],r=[{label:"Number of orders",data:i,color:"#1ab394",bars:{show:!0,align:"center",barWidth:5184e4,lineWidth:0}},{label:"Payments",data:t,yaxis:2,color:"#1C84C6",lines:{lineWidth:1,show:!0,fill:!0,fillColor:{colors:[{opacity:.2},{opacity:.4}]}},splines:{show:!1,tension:.6,lineWidth:1,fill:.1}}];$.plot($("#flot-dashboard-chart"),r,{xaxis:{mode:"time",tickSize:[3,"day"],tickLength:0,axisLabel:"Date",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Arial",axisLabelPadding:10,color:"#d5d5d5"},yaxes:[{position:"left",max:1070,color:"#d5d5d5",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Arial",axisLabelPadding:3},{position:"right",clolor:"#d5d5d5",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:" Arial",axisLabelPadding:67}],legend:{noColumns:1,labelBoxBorderColor:"#000000",position:"nw"},grid:{hoverable:!1,borderWidth:0}})};return{init:n}}();views.createNS("views.users.edit");views.users.edit=function(){var n=function(){$(document).ready(function(){views.app.initPage();views.app.syncPanelTitle("#panel-form","#Name");t()})},t=function(){$(".btn-delete").click(function(){var n=$("#Id").val().getNumbers();views.app.deleteRecord("/Users/Delete/"+n,function(){views.app.navTo("/Users/Index")})})};return{init:n}}();views.createNS("views.users.index");views.users.index=function(){var n=function(){$(document).ready(function(){views.app.initPage();mvcGrid=views.app.initMvcGrid({elementId:"users-grid",onLoad:t});$(".grid-search").focus()})},t=function(n){n.unbind("click");n.click(function(){var n=$(this),t=n.find(".collapse").text();event.target.tagName.toLowerCase()!=="button"&&event.target.tagName.toLowerCase()!=="a"&&views.app.navTo("/Users/Edit/"+t)})};return{init:n}}();